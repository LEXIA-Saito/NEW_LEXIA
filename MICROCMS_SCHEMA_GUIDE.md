# microCMS スキーマ設定ガイド（詳細版）
## LEXIAブログ用 - 自由度の高いブログ記事作成

**最終更新**: 2025-10-15  
**対象**: microCMS管理画面での設定作業

---

## 📋 目次

1. [microCMS管理画面での基本設定](#microcms管理画面での基本設定)
2. [APIスキーマの完全定義](#apiスキーマの完全定義)
3. [各フィールドの詳細設定](#各フィールドの詳細設定)
4. [実際の記事作成例](#実際の記事作成例)
5. [高度な使い方](#高度な使い方)

---

## 🎯 microCMS管理画面での基本設定

### Step 1: サービスの作成

1. microCMSダッシュボード（https://app.microcms.io/）にログイン
2. **「サービスを作成」**ボタンをクリック
3. サービス情報を入力:
   ```
   サービス名: LEXIA Blog（任意）
   サービスID: lexia-blog（任意、英数字とハイフン）
   プラン: Hobbyプラン（無料）でOK
   ```
4. **「作成する」**をクリック

### Step 2: APIの作成

1. 作成したサービスのダッシュボードで **「API作成」**
2. API情報を入力:
   ```
   API名: ブログ（任意）
   エンドポイント: blog
   APIの型: リスト形式
   ```
3. **「作成する」**をクリック

---

## 📝 APIスキーマの完全定義

### 全体構成図

```
blog (リスト形式)
├── slug (テキストフィールド) ✅必須
├── title (テキストフィールド) ✅必須
├── description (テキストエリア) ✅必須
├── genre (セレクトフィールド) ✅必須
├── tags (複数選択フィールド)
├── date (日時) ✅必須
├── heroImage (画像)
├── heroImageAlt (テキストフィールド)
└── sections (繰り返しフィールド) ✅必須
    ├── heading (テキストフィールド)
    ├── body (複数テキストフィールド)
    ├── image (画像)
    ├── imageAlt (テキストフィールド)
    ├── list (複数テキストフィールド)
    └── table (カスタムフィールド - JSON)
```

---

## 🔧 各フィールドの詳細設定

### 1. slug（スラッグ）

**フィールドID**: `slug`  
**種類**: テキストフィールド  
**必須**: ✅ はい

<details>
<summary>📋 設定手順を開く</summary>

1. **「フィールドを追加」** → **「テキストフィールド」**
2. 設定項目:
   ```
   フィールドID: slug
   表示名: スラッグ
   説明: 記事のURL（例: nextjs-15-guide）英数字とハイフンのみ
   必須項目: ✅ チェック
   ```
3. **「検証」タブ**:
   ```
   パターン検証: ^[a-z0-9]+(?:-[a-z0-9]+)*$
   エラーメッセージ: 英数字とハイフンのみ使用可能です
   ```
4. **「追加」**をクリック

</details>

**記入例**:
```
nextjs-15-migration-guide
infisical-introduction
studio-ai-status-2025
```

---

### 2. title（タイトル）

**フィールドID**: `title`  
**種類**: テキストフィールド  
**必須**: ✅ はい

<details>
<summary>📋 設定手順を開く</summary>

1. **「フィールドを追加」** → **「テキストフィールド」**
2. 設定項目:
   ```
   フィールドID: title
   表示名: タイトル
   説明: 記事のタイトル（SEOタイトルと同じ）
   必須項目: ✅ チェック
   ```
3. **「検証」タブ**:
   ```
   最小文字数: 10
   最大文字数: 100
   ```
4. **「追加」**をクリック

</details>

**記入例**:
```
Next.js 15 移行ガイド：新機能と移行手順を徹底解説
Infisical: オープンソースのシークレット管理プラットフォーム
STUDIOアップデート総点検：あの「STUDIO AI」は今どこに？
```

---

### 3. description（概要・メタディスクリプション）

**フィールドID**: `description`  
**種類**: テキストエリア  
**必須**: ✅ はい

<details>
<summary>📋 設定手順を開く</summary>

1. **「フィールドを追加」** → **「テキストエリア」**
2. 設定項目:
   ```
   フィールドID: description
   表示名: 概要
   説明: 記事の要約（OG・Twitterカード・検索結果に表示）
   必須項目: ✅ チェック
   ```
3. **「検証」タブ**:
   ```
   最小文字数: 50
   最大文字数: 160
   ```
4. **「追加」**をクリック

</details>

**記入例**:
```
Next.js 15の新機能（React 19サポート、Turbopack改善）と
移行時の注意点をコード例付きで解説します。
```

---

### 4. genre（ジャンル）

**フィールドID**: `genre`  
**種類**: セレクトフィールド  
**必須**: ✅ はい

<details>
<summary>📋 設定手順を開く</summary>

1. **「フィールドを追加」** → **「セレクトフィールド」**
2. 設定項目:
   ```
   フィールドID: genre
   表示名: ジャンル
   説明: 記事のカテゴリ
   必須項目: ✅ チェック
   種類: 単一選択
   ```
3. **「選択肢」を追加**:
   ```
   選択肢1:
     値: tech
     表示名: 技術・実装（Tech / Implementation）
   
   選択肢2:
     値: trends
     表示名: トレンド・先端（Trends / Innovation）
   
   選択肢3:
     値: ideas
     表示名: 戦略・構想（Strategy / Ideas）
   ```
4. **「追加」**をクリック

</details>

**ジャンルの使い分け**:

| ジャンル | 用途 | 記事例 |
|---------|------|--------|
| **tech** | コード解説、実装方法、API使い方 | Next.js移行ガイド、Firebase導入手順 |
| **trends** | 新技術動向、業界トレンド、ツール紹介 | STUDIO AIの現状、Onlook調査レポート |
| **ideas** | 戦略論、UX思想、プロセス設計 | デザインシステム構築論、チーム運営戦略 |

---

### 5. tags（タグ）

**フィールドID**: `tags`  
**種類**: 複数選択フィールド  
**必須**: 任意（推奨: 1〜3個）

<details>
<summary>📋 設定手順を開く</summary>

1. **「フィールドを追加」** → **「複数選択フィールド」**
2. 設定項目:
   ```
   フィールドID: tags
   表示名: タグ
   説明: 記事に関連するキーワード（1〜3個推奨）
   必須項目: ❌ チェックなし
   ```
3. **「選択肢」を追加**（よく使うタグを事前登録）:
   ```
   Next.js, React, TypeScript, JavaScript, Tailwind CSS,
   Firebase, Vercel, microCMS, AI, Web開発, モバイル,
   デザイン, UX, セキュリティ, パフォーマンス, など
   ```
4. **「追加」**をクリック

</details>

**記入例**:
```
Next.js, React, Web開発
Infisical, セキュリティ, オープンソース
Studio, ノーコード, AI
```

**💡 Tips**: 後から選択肢を追加可能。記事作成時に新しいタグが必要になったら随時追加してください。

---

### 6. date（公開日）

**フィールドID**: `date`  
**種類**: 日時  
**必須**: ✅ はい

<details>
<summary>📋 設定手順を開く</summary>

1. **「フィールドを追加」** → **「日時」**
2. 設定項目:
   ```
   フィールドID: date
   表示名: 公開日
   説明: 記事の公開日（YYYY-MM-DD形式）
   必須項目: ✅ チェック
   ```
3. **「追加」**をクリック

</details>

**記入例**:
```
2025-10-15
2025-10-08
```

**💡 Tips**: microCMSでは自動的に日時ピッカーが表示されます。手入力も可能です。

---

### 7. heroImage（アイキャッチ画像）

**フィールドID**: `heroImage`  
**種類**: 画像  
**必須**: 任意（強く推奨）

<details>
<summary>📋 設定手順を開く</summary>

1. **「フィールドを追加」** → **「画像」**
2. 設定項目:
   ```
   フィールドID: heroImage
   表示名: アイキャッチ画像
   説明: 記事のメイン画像（OG・Twitterカード・一覧ページに表示）
   必須項目: ❌ チェックなし
   ```
3. **「追加」**をクリック

</details>

**推奨サイズ**:
- 横幅: 1200px
- 縦幅: 675px（アスペクト比 16:9）
- フォーマット: WebP, AVIF, または JPEG

**💡 Tips**: microCMSにアップロードすると自動的に最適化されます。

---

### 8. heroImageAlt（アイキャッチ画像の代替テキスト）

**フィールドID**: `heroImageAlt`  
**種類**: テキストフィールド  
**必須**: 任意（heroImage設定時は推奨）

<details>
<summary>📋 設定手順を開く</summary>

1. **「フィールドを追加」** → **「テキストフィールド」**
2. 設定項目:
   ```
   フィールドID: heroImageAlt
   表示名: アイキャッチ画像の代替テキスト
   説明: 画像の内容説明（SEO・アクセシビリティ向上）
   必須項目: ❌ チェックなし
   ```
3. **「追加」**をクリック

</details>

**記入例**:
```
Next.js 15のロゴとコードエディタのスクリーンショット
Infisical のダッシュボードイメージ
Studio / STUDIO AI に関する公式ビジュアル
```

---

### 9. sections（記事本文セクション）⭐ 最重要

**フィールドID**: `sections`  
**種類**: 繰り返しフィールド  
**必須**: ✅ はい

<details>
<summary>📋 設定手順を開く</summary>

1. **「フィールドを追加」** → **「繰り返しフィールド」**
2. 設定項目:
   ```
   フィールドID: sections
   表示名: 記事セクション
   説明: 記事本文の各セクション（見出し・本文・画像・リスト）
   必須項目: ✅ チェック
   ```
3. **「フィールドを追加」**をクリックして、以下のサブフィールドを追加

</details>

---

#### 9-1. heading（セクション見出し）

**フィールドID**: `heading`  
**種類**: テキストフィールド  
**必須**: 任意

<details>
<summary>📋 設定手順を開く</summary>

1. sectionsフィールド内で **「フィールドを追加」** → **「テキストフィールド」**
2. 設定項目:
   ```
   フィールドID: heading
   表示名: 見出し
   説明: セクションのH2見出し（目次に表示される）
   必須項目: ❌ チェックなし
   ```
3. **「追加」**をクリック

</details>

**記入例**:
```
はじめに
主な機能
実装手順
まとめ
```

**💡 Tips**: 見出しを設定すると自動的に目次（TOC）に表示されます。

---

#### 9-2. body（本文）

**フィールドID**: `body`  
**種類**: 複数テキストフィールド  
**必須**: 任意

<details>
<summary>📋 設定手順を開く</summary>

1. sectionsフィールド内で **「フィールドを追加」** → **「複数テキストフィールド」**
2. 設定項目:
   ```
   フィールドID: body
   表示名: 本文
   説明: セクションの本文段落（1段落ごとに1エントリ）
   必須項目: ❌ チェックなし
   ```
3. **「追加」**をクリック

</details>

**記入例**:
```
段落1: Next.js 15では、React 19のサポートが追加され...
段落2: また、Turbopackのパフォーマンスが大幅に改善されました...
段落3: 移行時の注意点として、以下のポイントを確認してください...
```

**💡 Tips**: 
- 1段落ごとに「+ 追加」ボタンで新しいエントリを作成
- 改行は自動的に `<p>` タグでレンダリングされます

---

#### 9-3. image（セクション内画像）

**フィールドID**: `image`  
**種類**: 画像  
**必須**: 任意

<details>
<summary>📋 設定手順を開く</summary>

1. sectionsフィールド内で **「フィールドを追加」** → **「画像」**
2. 設定項目:
   ```
   フィールドID: image
   表示名: セクション内画像
   説明: このセクションに表示する画像
   必須項目: ❌ チェックなし
   ```
3. **「追加」**をクリック

</details>

**推奨サイズ**:
- 横幅: 800〜1200px
- フォーマット: WebP, AVIF, または JPEG

---

#### 9-4. imageAlt（セクション内画像の代替テキスト）

**フィールドID**: `imageAlt`  
**種類**: テキストフィールド  
**必須**: 任意（image設定時は推奨）

<details>
<summary>📋 設定手順を開く</summary>

1. sectionsフィールド内で **「フィールドを追加」** → **「テキストフィールド」**
2. 設定項目:
   ```
   フィールドID: imageAlt
   表示名: 画像の代替テキスト
   説明: セクション内画像の内容説明
   必須項目: ❌ チェックなし
   ```
3. **「追加」**をクリック

</details>

**記入例**:
```
Next.js 15の新機能一覧表
Infisical のダッシュボードスクリーンショット
設定ファイルの例
```

---

#### 9-5. list（箇条書きリスト）

**フィールドID**: `list`  
**種類**: 複数テキストフィールド  
**必須**: 任意

<details>
<summary>📋 設定手順を開く</summary>

1. sectionsフィールド内で **「フィールドを追加」** → **「複数テキストフィールド」**
2. 設定項目:
   ```
   フィールドID: list
   表示名: 箇条書きリスト
   説明: 箇条書きで表示したい項目（1項目ごとに1エントリ）
   必須項目: ❌ チェックなし
   ```
3. **「追加」**をクリック

</details>

**記入例**:
```
項目1: React 19のサポート
項目2: Turbopackの安定性向上
項目3: App Routerの機能拡張
項目4: パフォーマンスの最適化
```

**💡 Tips**: 自動的に `<ul><li>` タグでレンダリングされます。

---

#### 9-6. table（表組み）⭐ 高度な使い方

**フィールドID**: `table`  
**種類**: カスタムフィールド（JSON）  
**必須**: 任意

<details>
<summary>📋 設定手順を開く</summary>

1. sectionsフィールド内で **「フィールドを追加」** → **「カスタムフィールド」**
2. 設定項目:
   ```
   フィールドID: table
   表示名: 表組み
   説明: テーブルデータ（JSON形式）
   必須項目: ❌ チェックなし
   入力形式: JSON
   ```
3. **「追加」**をクリック

</details>

**JSON入力例**:
```json
{
  "headers": ["機能", "Next.js 14", "Next.js 15"],
  "rows": [
    ["React対応", "React 18", "React 19"],
    ["ビルドツール", "Webpack", "Turbopack"],
    ["App Router", "安定版", "拡張版"]
  ]
}
```

**表示結果**:

| 機能 | Next.js 14 | Next.js 15 |
|------|-----------|-----------|
| React対応 | React 18 | React 19 |
| ビルドツール | Webpack | Turbopack |
| App Router | 安定版 | 拡張版 |

**💡 Tips**: 
- `headers`: テーブルのヘッダー行（配列）
- `rows`: データ行（2次元配列）
- JSON形式で入力するため、コピペ推奨

---

## ✍️ 実際の記事作成例

### 例1: 技術解説記事

**基本情報**:
```
slug: nextjs-15-migration-guide
title: Next.js 15 移行ガイド：新機能と移行手順を徹底解説
description: Next.js 15の新機能（React 19サポート、Turbopack改善）と移行時の注意点をコード例付きで解説します。
genre: tech
tags: [Next.js, React, Web開発]
date: 2025-10-15
heroImage: [画像アップロード]
heroImageAlt: Next.js 15のロゴとコードエディタ
```

**sections（セクション構成）**:

**セクション1**:
```
heading: （空欄 - 導入部分）
body: 
  - Next.js 15が2025年10月にリリースされました。
  - 本記事では、主な新機能と移行手順を解説します。
```

**セクション2**:
```
heading: 主な新機能
body:
  - Next.js 15では以下の機能が追加されました。
list:
  - React 19のサポート
  - Turbopackの安定性向上
  - App Routerの機能拡張
  - 画像最適化の改善
image: [新機能の図解画像]
imageAlt: Next.js 15の新機能一覧図
```

**セクション3**:
```
heading: 移行手順
body:
  - 既存のNext.js 14プロジェクトを15に移行する手順を説明します。
  - まず、package.jsonを更新してください。
list:
  - npm install next@15 react@19 react-dom@19
  - next.config.mjsの設定を確認
  - 非推奨APIの置き換え
  - テストの実行
```

**セクション4**:
```
heading: パフォーマンス比較
body:
  - Next.js 14と15のビルド時間を比較しました。
table:
  {
    "headers": ["指標", "Next.js 14", "Next.js 15", "改善率"],
    "rows": [
      ["ビルド時間", "45秒", "28秒", "38%削減"],
      ["初回ロード", "1.2秒", "0.8秒", "33%高速化"],
      ["Hydration", "200ms", "120ms", "40%改善"]
    ]
  }
```

**セクション5**:
```
heading: まとめ
body:
  - Next.js 15は、パフォーマンスと開発体験が大幅に向上しています。
  - 移行は比較的スムーズですが、React 19の変更点に注意が必要です。
  - 公式ドキュメントを参照しながら、段階的に移行することをおすすめします。
```

---

### 例2: トレンド紹介記事

**基本情報**:
```
slug: onlook-visual-editor-2025
title: Onlook: デザイナーがReactを直感操作できる次世代エディタ
description: Onlookは、デザイナーがコードを書かずにReactコンポーネントを編集できる革新的なビジュアルエディタです。
genre: trends
tags: [Onlook, デザイン, React]
date: 2025-10-10
heroImage: [画像アップロード]
heroImageAlt: Onlookのエディタ画面
```

**sections**:

**セクション1**:
```
heading: （空欄）
body:
  - デザインと実装の境界が曖昧になりつつある現代、Onlookが注目を集めています。
  - Onlookは、デザイナーが直接Reactコンポーネントを視覚的に編集できるツールです。
image: [Onlookロゴ]
imageAlt: Onlook のロゴ
```

**セクション2**:
```
heading: Onlookの主要機能
list:
  - リアルタイムビジュアル編集：ドラッグ&ドロップでコンポーネント配置
  - AI駆動デザイン：自然言語でデザインを生成
  - Figmaインポート：既存デザインをReactに変換
  - コード同期：デザイン変更が即座にコードに反映
image: [機能デモ画像]
imageAlt: Onlookのビジュアル編集機能のデモ
```

---

## 🚀 高度な使い方

### Tips 1: セクションの組み合わせ

**パターン1: テキスト + リスト + 画像**
```
heading: 主要機能
body: ["機能の概要説明..."]
list: ["機能1", "機能2", "機能3"]
image: [機能図解]
imageAlt: 機能の図解
```

**パターン2: テキストのみ（導入・まとめ）**
```
heading: （空欄 or "まとめ"）
body: ["導入文...", "補足説明..."]
```

**パターン3: 表組み + 解説**
```
heading: パフォーマンス比較
body: ["以下の表は測定結果です。"]
table: { "headers": [...], "rows": [...] }
```

### Tips 2: 画像の最適化

microCMSにアップロードした画像は自動的に最適化されますが、さらに以下の工夫が可能:

1. **WebP/AVIF形式で事前変換**（Squoosh、TinyPNGなど）
2. **適切なサイズでアップロード**（不要に大きい画像は避ける）
3. **代替テキストを必ず設定**（SEO・アクセシビリティ向上）

### Tips 3: SEO最適化

- **title**: キーワードを前方に配置（50〜60文字）
- **description**: 検索意図を明確に（120〜160文字）
- **heroImage**: OG/Twitterカードで綺麗に表示される画像
- **heading**: H2見出しにキーワードを含める

---

## 📚 補足: microCMS型 → アプリ型の変換

`lib/microcms-blog.ts` で以下のように自動変換されます:

```typescript
// microCMSから取得したデータ
{
  id: "abc123",
  slug: "nextjs-15-guide",
  title: "Next.js 15 移行ガイド",
  // ...その他のフィールド
}

// ↓ 自動変換

// アプリ内部で使用されるデータ
{
  slug: "nextjs-15-guide",
  title: "Next.js 15 移行ガイド",
  readingTime: "8分", // 自動計算
  // ...その他のフィールド
}
```

**読了時間の自動計算**:
- 全セクションの文字数を集計
- 400wpm（語/分）で割り算
- 切り上げて「X分」として表示

---

## ✅ スキーマ設定チェックリスト

設定が完了したら以下を確認:

- [ ] `slug` フィールドが作成され、パターン検証が設定されている
- [ ] `title` フィールドが必須になっている
- [ ] `description` フィールドが作成されている
- [ ] `genre` フィールドに3つの選択肢（tech/trends/ideas）が設定されている
- [ ] `tags` フィールドに選択肢が登録されている
- [ ] `date` フィールドが作成されている
- [ ] `heroImage` と `heroImageAlt` が作成されている
- [ ] `sections` 繰り返しフィールドが作成されている
- [ ] sections内に `heading`, `body`, `image`, `imageAlt`, `list`, `table` が設定されている

---

## 🎉 完了！

これでmicroCMSのスキーマ設定が完了しました。

**次のステップ**:
1. 試しに1つ記事を作成してみる
2. プレビュー機能で表示を確認
3. 「公開」ボタンでAPIに反映
4. ローカル開発サーバーで確認（`pnpm dev`）

何か不明点があれば `MICROCMS_BLOG_GUIDE.md` を参照してください！

---

**作成日**: 2025-10-15  
**管理者**: LEXIA開発チーム
